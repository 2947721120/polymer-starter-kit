<!doctype html><html><head><meta charset="UTF-8"><title>iron-localstorage-basic</title><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><script src="../../webcomponentsjs/webcomponents.js"></script><script src="../../web-component-tester/browser.js"></script><script src="../../test-fixture/test-fixture-mocha.js"></script><link rel="import" href="../../test-fixture/test-fixture.html"><link rel="import" href="../iron-localstorage.html"></head><body><test-fixture id="fixture"><template><iron-localstorage id="localstorage" name="iron-localstorage-test"></iron-localstorage></template></test-fixture><script>
    var storage;

    suite('basic', function() {

      setup(function() {
        window.localStorage.setItem('iron-localstorage-test', '{"foo":"bar"}');
        document.getElementById('fixture').create();
        storage = document.getElementById('localstorage');
      });

      teardown(function() {
        window.localStorage.removeItem('iron-localstorage-test');
      });

      test('load', function() {
        assert.isNotNull(storage.value);
        assert.equal(storage.value.foo, 'bar');
      });

      test('save', function() {
        var newValue = {'foo': 'zot'};
        storage.value = newValue;
        var v = window.localStorage.getItem(storage.name);
        v = JSON.parse(v);
        assert.equal(v.foo, newValue.foo);
      });

    });

  </script></body></html>